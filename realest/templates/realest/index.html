<!DOCTYPE html>
<html lang="en">
  <head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script
      src="{% static 'realest/jquery-3.6.4.min.js' %}"
      type="text/javascript"
    ></script>
    <link
      rel="canonical"
      href="https://getbootstrap.com/docs/5.3/utilities/background/"
    />
    <title>Audit Questioner</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'realest/style.css' %}"
    />
  </head>
  <body style="background-color: #dddddd">
    <nav class="sidebar bg-dark">
      <center>
        <img
          src="{% static 'realest/logo.png' %}"
          class="bg-white p-3 rounded shadow-lg mt-3"
          width="170px"
        />
      </center>
      <hr />
      <div class="p-0">
        <ul class="menu-sidebar fs-5 p-0 ">
          <li
            class="ps-2 fs-5 li py-1 text-black"
            
          >
            <a href="/" class="text-decoration-none text-white"
              ><i class="fa fa-home" aria-hidden="true"></i>
              <span class="s-txt fw-bold ps-2" style="font-size: 18px"
                >Home</span
              ></a
            >
          </li>

          <li
            class="ps-2 fs-5 li py-1 "
            style="background-color: rgb(233, 236, 239)"
          >
            <a href="/agent/dashboard" class="text-decoration-none text-black"
              ><i
                class="fa fa-tachometer pe-1"
                style="color: black"
                aria-hidden="true"
              ></i
              ><span class="s-txt fw-bold ps-2" style="font-size: 18px"
                >Dashboard</span
              ></a
            >
          </li>

          <li class="nav-link li">
            <button
              class="btn btn-toggle d-block align-items-center rounded border-0 collapsed text-white fw-normal"
              data-bs-toggle="collapse"
              data-bs-target="#home-collapse"
              aria-expanded="false"
            >
              <i class="fa fa-plus" aria-hidden="true"></i
              ><span class="s-txt ps-3 fw-bold" style="font-size: 18px"
                >Add Property</span
              >
            </button>
            <div class="collapse under text-black" id="home-collapse">
              <div class="text-left">
                <ul
                  class="list-unstyled fw-normal pb-1 small mt-2 text-left lh-3 mx-4"
                  style="text-align: left; font-size: 15px"
                >
                  <li class="text-left fw-normal my-1">
                    <a
                      href="/agent/residential"
                      class="text-decoration-none text-black"
                      >Residential</a
                    >
                  </li>
                  <li class="text-left fw-normal my-1">
                    <a
                      href="/agent/commercial"
                      class="text-decoration-none text-black"
                      >Commercial</a
                    >
                  </li>
                  <li class="text-left fw-normal my-1">
                    <a
                      href="/agent/land"
                      class="text-decoration-none text-black"
                      >Land</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </li>
        </ul>
        <a href="/logout" 
        class="text-decoration-none bg-danger d-flex justify-content-center align-items-center py-2 rounded"
        style="position: fixed;bottom: 0%;width: 15%;color: #f0f0f0;font-size: medium;">
        <i class="fa fa-power-off" aria-hidden="true"></i>
        <span class="s-txt mx-1 fw-bold"> Logout</span>
        
      </a>
      
        </div>
    </nav>
    <main class="bg-gradient text-dark main-content">
      <div class="px-3 pt-3 fw-light mb-5 d-flex justify-content-between">
        <h1>Welcome to Dashboard {{ user.username }}</h1>
                 
        
      </div>
      <div class="ms-3">
        <h2>Seacrh</h2>

        <div class="d-flex">
          <form action="/search/" method="get" style="width: 80%">
            <div class="input-group mb-3">
              <input
                type="text"
                name="search"
                class="form-control"
                placeholder="Enter Location or City"
              />
              <button type="submit" class="btn btn-primary">
                <i class="fa fa-search"></i>
              </button>
            </div>
          </form>
          <button
            data-bs-toggle="collapse"
            data-bs-target="#filter"
            aria-expanded="false"
            class="bg-dark btn filter text-light btn-toggle collapsed"
            style="
              width: fit-content;
              height: min-content;
              border-radius: 3px;
              margin-left: 4%;
            "
          >
            <i class="fa fa-filter px-1" aria-hidden="true"></i
            ><span class="s-txt">Filter</span>
          </button>
        </div>
        <div
          id="filter"
          class="under collapse py-2 w-100 bg-dark justify-content-between shadow-lg"
          style="border: 3px solid rgb(231, 231, 231); margin-right: 2%"
        >
          <span class="d-flex">
            <div class="mx-2" id="bhk">
              <button
                type="button"
                id="bhte"
                class="btn btn-secondary dropdown-toggle"
                style="font-size: 15px"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                data-bs-offset="0,5"
              >
                BHK
              </button>
              <ul class="dropdown-menu" style="font-size: 15px">
                <li class="dropdown-item" onclick="valuebhk('1 BHK')">1 BHK</li>
                <li class="dropdown-item" onclick="valuebhk('2 BHK')">2 BHK</li>
                <li class="dropdown-item" onclick="valuebhk('3 BHK')">3 BHK</li>
              </ul>
            </div>
            <div class="mx-2" id="area" style="display: none">
              <button
                type="button"
                id="arte"
                class="btn btn-secondary dropdown-toggle"
                style="font-size: 15px"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                data-bs-offset="0,5"
              >
                Area
              </button>
              <ul class="dropdown-menu" style="font-size: 15px">
                <li class="dropdown-item" onclick="area('<500sqft')">
                  500sqft
                </li>
                <li class="dropdown-item" onclick="area('500sqft - 1000sqft')">
                  500sqft - 1000sqft
                </li>
                <li class="dropdown-item" onclick="area('1000sqft - 2000sqft')">
                  1000sqft - 2000sqft
                </li>
                <li class="dropdown-item" onclick="area('>2000sqft')">
                  >2000sqft
                </li>
              </ul>
            </div>

            <div class="mx-2">
              <button
                type="button"
                class="btn btn-secondary dropdown-toggle"
                style="font-size: 15px"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                data-bs-offset="0,5"
                id="show"
              >
                Buy
              </button>
              <div class="dropdown-menu ps-3 mb-5" style="font-size: 15px">
                <li onclick="sell('Buy')">Buy</li>
                <li onclick="sell('Rent')">Rent</li>
              </div>
            </div>
            <div class="mx-2">
              <button
                type="button"
                class="btn btn-secondary dropdown-toggle"
                style="font-size: 15px"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                data-bs-offset="0,5"
                id="ned"
              >
                Resedential
              </button>
              <div class="dropdown-menu ps-3 mb-5" style="font-size: 15px">
                <li onclick="need('Residential')">Resedential</li>
                <li onclick="need('Commercial')">Commercial</li>
                <li onclick="need('Land')">Land</li>
              </div>
            </div>
          </span>
          <button
            type="submit"
            class="justify-content-end btn btn-primary ms-2 mt-4 bg-gradient"
            style="font-size: 15px"
            onclick="work()"
          >
            Apply
          </button>
        </div>
      </div>
      <div class="container-xxl">
        <p class="w-100 text-center text-black fw-bold" >{{ msg }}</p>
        {% for row in props %}
        <div
          class="rounded bg-gradient text-black shadow-lg  my-3 both"
          style="background-color: #f0f0f0"
        >
        <span class="d-flex align-items-center justify-content-center home">
          <!-- {{ row.img }} -->
          {% if row.img %}
          <img src="/media/{{ row.img }}" class="rounded p-1 w-100">
          {% else %}
          <p>No Image</p>
          {% endif %}
        </span>
        <div class="w-100">
          <span class="d-flex justify-content-between">
            <p class="ps-3 pt-3 text-success-emphasis fw-bold">
              {{row.area }} {{ row.type}} property for {{row.rent}} at
              <span id="price">{{row.price}}</span>
            </p>
            <a href="/delete/{{ row.id }}" class="text-decoration-none">
              <button class="btn btn-danger m-1 fw-bolder">X</button></a>
          </span>
          <h4 class="w-100 text-break ps-3">
            {{ row.project }} ({{ row.type }})
          </h4>
          <span class="d-flex justify-content-between px-3">
            <p>{{ row.bhk }} / {{ row.area}}</p>
            <p>{{ row.propertytype}}</p>
            <p class="text-info-emphasis fw-bold">
              ₹<span id="price"> {{ row.price }} </span> / {{ row.foor }}
            </p>
            <p>{{ row.floor }} Floor</p>
          </span>
          <div class="px-3 scroll text-break">{{ row.description }}</div>
          <span class="d-flex">
            <p class="w-75 text-break px-3 m-0 text-info-emphasis">
              {{ row.address }}
            </p>
            <p class="w-25 pe-3 fw-bold" style="float: right">
              Posted on {{row.date}}
            </p>
          </span>
        </div>
        </div>
        {% endfor %}
      </div>
    </main>
  </body>
</html>

<script type="text/javascript">
  var slider = document.getElementById("myRange");

  function valuebhk(data) {
    localStorage.setItem("bhk", data);
    const bhk = document.getElementById("bhte");
    bhk.innerText = data;
  }
  function area(data) {
    localStorage.setItem("area", data);
    const area = document.getElementById("arte");
    area.innerText = data;
  }
  function sell(data) {
    const show = document.getElementById("show");
    show.innerText = data;
  }

  function displ() {
    let fil = document.getElementById("filter");
    if (fil.style.display == "none") {
      fil.style.display = "flex";
    } else {
      fil.style.display = "none";
    }
  }
  function need(data) {
    let areabtn = document.getElementById("area");
    let bhkbtn = document.getElementById("bhk");
    let sh = document.getElementById("ned");
    sh.innerText = data;
    if (data === "Residential") {
      bhkbtn.style.display = "";
      areabtn.style.display = "none";
    }
    if (data === "Corporate" || "Land") {
      bhkbtn.style.display = "none";
      areabtn.style.display = "block";
    }
  }
  function work() {
    let bhk = document.getElementById("bhte");
    let area = document.getElementById("arte");
    let link =
      "?type=" +
      ned.innerText.trim() +
      "&bhk=" +
      bhk.innerText.trim() +
      "&area=" +
      area.innerText.trim() +
      "&status=" +
      show.innerText.trim();
    console.log(link);
    window.location.href = link;
  }

  let x = document.querySelectorAll("#price");
  for (let i = 0, len = x.length; i < len; i++) {
    let num = Number(x[i].innerHTML).toLocaleString("en-IN");
    x[i].innerHTML = num;
    x[i].classList.add("₹");
  }

</script>
<style>
  div.scroll {
    width: 80%;
    max-height: 100px;
    overflow-x: auto;
    overflow-y: scroll;
    margin-bottom: 10px;
  }
</style>
